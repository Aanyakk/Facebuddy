<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Face Memory Helper</title>

<style>
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #dbe8ff, #eef3ff, #ffffff);
    background-size: 400% 400%;
    animation: gradientMove 10s ease infinite;
    color: #1c2e4a;
  }
.modal {
  max-height: 90vh;
  overflow-y: auto;
}

  body.dark {
    background: linear-gradient(135deg, #0f1724, #071226);
    color: #e6eef8;
  }

  @keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  h1 {
    text-align: center;
    padding: 20px 0;
    font-size: 42px;
    color: inherit;
    letter-spacing: 1px;
    animation: fadeDown 0.6s;
  }

  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  nav {
    display: flex;
    justify-content: center;
    gap: 40px;
    padding: 20px;
  }

  nav a {
    text-decoration: none;
    color: #2a4e9a;
    font-weight: 600;
    font-size: 18px;
    padding-bottom: 6px;
    border-bottom: 2px solid transparent;
    transition: 0.3s;
  }
  body.dark nav a { color: #9fb8ff; }
  nav a:hover {
    color: #4d79ff;
    border-bottom: 2px solid #4d79ff;
  }

  .section {
    display: none;
    padding: 20px 40px;
    animation: fade 0.4s;
  }
  .active { display: block; }

  @keyframes fade {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  
  .card {
    width: 240px;
    border-radius: 20px;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(10px);
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    display: inline-block;
    margin: 14px;
    cursor: pointer;
    transition: transform .3s ease, box-shadow .3s;
  }

  body.dark .card { background: rgba(15,22,36,0.7); box-shadow: 0 8px 20px rgba(0,0,0,0.4); }

  .card:hover {
    transform: translateY(-8px) scale(1.03);
    box-shadow: 0 12px 26px rgba(0,0,0,0.25);
  }

  .card img {
    width: 100%; height: 180px; object-fit: cover;
  }

  .cardInfo {
    padding: 12px;
    text-align: center;
  }

  .cardInfo h3 { margin: 5px; font-size: 20px; color: #1f3f7b; }
  body.dark .cardInfo h3 { color: #dbe8ff; }
  .cardInfo p { margin: 3px; color: #4b5f7a; }
  body.dark .cardInfo p { color: #a9c2ff; }

  .inputBox {
    padding: 12px 14px;
    width: 280px;
    border-radius: 12px;
    border: 1px solid #c7d5ff;
    display: block;
    margin-bottom: 15px;
    background: white;
  }
  body.dark .inputBox { background: rgba(255,255,255,0.03); border: 1px solid rgba(155,170,255,0.15); color: #e6eef8; }

  button {
    padding: 10px 20px;
    border: none;
    background: #4d79ff;
    color: white;
    border-radius: 12px;
    cursor: pointer;
    font-size: 16px;
    font-weight: 600;
    transition: 0.3s;
  }
  button:hover { background: #3358cc; }

  .modalBG {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    justify-content: center;
    align-items: center;
    z-index: 999;
  }

  .modal {
    background: white;
    width: 420px;
    padding: 20px;
    border-radius: 20px;
    animation: zoomIn 0.3s;
    box-shadow: 0 12px 30px rgba(0,0,0,0.3);
  }
  body.dark .modal { background: #0b1220; color: #e6eef8; }

  @keyframes zoomIn {
    from { transform: scale(0.7); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .modal img {
    width: 100%; border-radius: 14px; margin-bottom: 15px;
  }

  .noteItem {
    background: #eef3ff;
    padding: 10px;
    border-radius: 10px;
    margin: 6px 0;
    border-left: 4px solid #4d79ff;
  }
  body.dark .noteItem { background: rgba(255,255,255,0.03); border-left-color: #9fb8ff; }

  .noteActions { margin-top: 6px; }
  .smallAction { background: transparent; border: none; color: #1f3f7b; font-weight: 600; cursor: pointer; margin-left: 8px; }
  body.dark .smallAction { color: #a9c2ff; }

</style>
</head>

<body>
<h1>Face Memory Helper</h1>

<nav>
  <a onclick="show('home')">Home</a>
  <a onclick="show('add')">Add Person</a>
  <a onclick="show('view')">View People</a>
</nav>

<div id="home" class="section active">
  <h2>Welcome</h2>
  <p>This Website is to help you make everyday life easier.<br>
    It allows you to store names, relationships, photos, and notes about people you meet.<br><br>
    <strong>How to Use:</strong><br>
    1. Go to the "Add Person" tab to add a new person by entering their name, relationship/info, and uploading a photo.<br>
    2. Go to the "View People" tab to see all saved people. You can search, view details, add notes, edit, or delete entries.<br><br>
    All data is stored locally in your browser's storage for privacy.
  </p>
</div>

<div id="add" class="section">
  <h2>Add Person</h2>
  <input id="name" class="inputBox" placeholder="Name">
  <input id="relation" class="inputBox" placeholder="Relationship / Info">
  <input id="photoInput" type="file" class="inputBox" accept="image/*">
  <button onclick="savePerson()">Save</button>
</div>

<div id="view" class="section">
  <h2>Saved People</h2>
  <input id="search" class="inputBox" placeholder="Search" onkeyup="displayPeople()">
  <div id="peopleList"></div>
</div>

<div id="modalBG" class="modalBG" onclick="closeModal(event)">
  <div class="modal" onclick="event.stopPropagation()">
    <img id="modalPhoto" alt="Person photo">
    <h2 id="modalName"></h2>
    <p id="modalRelation"></p>
    <div style="margin:10px 0;">
  <button onclick="editPerson()" style="background:#4CAF50;">Edit Person</button>
  <button onclick="deletePerson()" style="background:#D9534F;">Delete Person</button>

  

</div>

    <h3>Notes</h3>
    <button id="darkModeToggle" onclick="toggleDarkMode()" style="background:#222; float:right; margin-top:-40px;">Dark Mode</button>
    <div id="modalNotes"></div>
    <textarea id="noteInput" class="inputBox" rows="3" placeholder="Add a note..."></textarea>
    <button onclick="addNote()">Add Note</button>
    <br><br>
    <button style="background:#888" onclick="closeModal()">Close</button>
  </div>
</div>

<script>
function show(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

let people = JSON.parse(localStorage.getItem("faceMemoryDB_v4") || "[]");
let currentIndex = null;

function deletePerson() {
  if (confirm("Are you sure you want to delete this person?")) {
    people.splice(currentIndex, 1);
    localStorage.setItem("faceMemoryDB_v4", JSON.stringify(people));
    closeModal();
    displayPeople();
  }
}

function editPerson() {
  let p = people[currentIndex];

  let newName = prompt("Edit name:", p.name);
  if (newName === null) return;

  let newRelation = prompt("Edit relationship/info:", p.relation);
  if (newRelation === null) return;

  p.name = newName.trim();
  p.relation = newRelation.trim();

  localStorage.setItem("faceMemoryDB_v4", JSON.stringify(people));
  openModal(currentIndex);
  displayPeople();
}


function savePerson() {
  let name = document.getElementById("name").value.trim();
  let relation = document.getElementById("relation").value.trim();
  let file = document.getElementById("photoInput").files[0];

  if (!name || !file) return alert("Name + photo required");

  let reader = new FileReader();
  reader.onload = e => {
    people.push({ name, relation, photo: e.target.result, notes: [] });
    localStorage.setItem("faceMemoryDB_v4", JSON.stringify(people));
    alert("Saved!");
    document.getElementById('name').value='';
    document.getElementById('relation').value='';
    document.getElementById('photoInput').value='';
    displayPeople();
  };
  reader.readAsDataURL(file);
}

function displayPeople() {
  let search = document.getElementById("search").value.toLowerCase();
  let list = document.getElementById("peopleList");
  list.innerHTML = "";

  people
    .filter(p => p.name.toLowerCase().includes(search))
    .forEach((p, index) => {
      list.innerHTML += `
        <div class="card" onclick="openModal(${index})">
          <img src="${p.photo}" alt="${p.name}">
          <div class="cardInfo">
            <h3>${p.name}</h3>
            <p>${p.relation || ""}</p>
          </div>
        </div>
      `;
    });
}

displayPeople();

function openModal(i) {
  currentIndex = i;
  let p = people[i];
  document.getElementById("modalPhoto").src = p.photo;
  document.getElementById("modalName").innerText = p.name;
  document.getElementById("modalRelation").innerText = p.relation;

  let notesHTML = "";
  p.notes.forEach((n, ni) => {
    notesHTML += `<div class='noteItem'>${n}<div class='noteActions'>` +
                 ` <button class='smallAction' onclick="editNote(${i},${ni})">Edit</button>` +
                 ` <button class='smallAction' onclick="deleteNote(${i},${ni})">Delete</button>` +
                 `</div></div>`;
  });

  document.getElementById("modalNotes").innerHTML = notesHTML;

  document.getElementById("modalBG").style.display = "flex";
}

function closeModal(e) {

  if (!e || e.target === document.getElementById('modalBG')) {
    document.getElementById("modalBG").style.display = "none";
  }
}

function editNote(pi, ni){
  let current = people[pi].notes[ni];
  let newText = prompt('Edit note:', current);
  if (newText !== null) {
    people[pi].notes[ni] = newText;
    localStorage.setItem('faceMemoryDB_v4', JSON.stringify(people));
    openModal(pi);
  }
}

function deleteNote(pi, ni){
  if (confirm('Delete this note?')){
    people[pi].notes.splice(ni,1);
    localStorage.setItem('faceMemoryDB_v4', JSON.stringify(people));
    openModal(pi);
  }
}

function toggleDarkMode(){
  document.body.classList.toggle('dark');
}

function addNote() {
  let text = document.getElementById("noteInput").value.trim();
  if (!text) return;

  let timestamp = new Date().toLocaleString();
  if (currentIndex === null) return;
  people[currentIndex].notes.push(`${timestamp}: ${text}`);

  localStorage.setItem("faceMemoryDB_v4", JSON.stringify(people));
  document.getElementById('noteInput').value = '';
  openModal(currentIndex);
}
</script>

</body>
</html>
